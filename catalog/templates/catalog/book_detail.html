{% extends 'base_generic.html' %}

{% block title %}
Book Detail
{% endblock title %}

{% block content %}

<div class="row">
  <h1 class="col-md-8">{{ book.title }}</h1>
  <div class="crud">
    {% if perms.catalog.change_book %}
    <a href="{% url 'book_update' book.pk %}" class="btn ">Update</a>
    {% endif %}
    {% if perms.catalog.delete_book %}
    <a href="{% url 'book_delete' book.pk %}" class="btn ">Delete</a>
    {% endif %}
  </div>
</div>

<p>Author: <a href="{% url 'author-detail' book.author.pk %}"><strong>{{ book.author }}</strong></a></p>
<p>Summary: {{ book.summary }}</p>
<p>ISBN: {{ book.isbn }}</p>
<p>Genre: {{ book.genre.all | join:", " }}</p>

<div class="copies">
  <h4>Copies</h4>
  <hr>
  {% for copy in book.bookinstance_set.all %}
  <p>Imprint: {{ copy.imprint }}</p>
  <p
    class="btn btn-sm {% if copy.status == 'a' %}btn-success{% elif copy.status == 'm' %}btn-danger{% else %}btn-warning{% endif %}">
    {{ copy.get_status_display }}</p>
  {% if copy.status != 'a' %}
  <p>Available on: {{ copy.due_back }}</p>
  {% endif %}
  <p class="text-muted">Id: {{ copy.id }}</p>
  <hr>
  {% endfor %}
</div>

{% endblock content %}